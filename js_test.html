<!DOCTYPE html>
<html>
    <head>
        <title>Quick JavaScript Test</title>
    </head>
    <body>
        <h1>Quick JavaScript Test for Crew Checklist</h1>

        <div id="test-results">
            <h2>Test Results:</h2>
            <div id="js-status">
                JavaScript Status: <span id="js-indicator">Testing...</span>
            </div>
            <div id="field-test">
                Field Detection: <span id="field-indicator">Testing...</span>
            </div>
            <div id="event-test">
                Event Trigger: <span id="event-indicator">Not tested</span>
            </div>
        </div>

        <div style="margin: 20px 0">
            <label>Test Field (simulates Kartu Keluarga input):</label><br />
            <input
                type="text"
                id="test-field"
                name="checklist[4][nomor_sertifikat]"
                placeholder="Type KK1234567890 here"
            />
            <button onclick="testManualTrigger()">Test Manual Trigger</button>
        </div>

        <div style="margin: 20px 0">
            <button onclick="runAllTests()">Run All Tests</button>
            <button onclick="clearConsole()">Clear Console</button>
        </div>

        <script>
            // Test 1: Check if JavaScript is working
            function testJavaScript() {
                console.log("‚úÖ JavaScript is working!");
                document.getElementById("js-indicator").innerHTML =
                    '<span style="color: green;">‚úÖ Working</span>';
                return true;
            }

            // Test 2: Check if field can be found
            function testFieldDetection() {
                const field = document.getElementById("test-field");
                if (field) {
                    console.log("‚úÖ Test field found:", field);
                    document.getElementById("field-indicator").innerHTML =
                        '<span style="color: green;">‚úÖ Found</span>';
                    return true;
                } else {
                    console.log("‚ùå Test field not found");
                    document.getElementById("field-indicator").innerHTML =
                        '<span style="color: red;">‚ùå Not found</span>';
                    return false;
                }
            }

            // Test 3: Test event triggering
            function testEventTrigger() {
                const field = document.getElementById("test-field");
                if (field) {
                    field.value = "KK1234567890";
                    field.dispatchEvent(new Event("blur", { bubbles: true }));
                    console.log(
                        "‚úÖ Manual event triggered with value:",
                        field.value
                    );
                    document.getElementById("event-indicator").innerHTML =
                        '<span style="color: green;">‚úÖ Triggered</span>';
                    return true;
                } else {
                    console.log("‚ùå Cannot trigger event - field not found");
                    document.getElementById("event-indicator").innerHTML =
                        '<span style="color: red;">‚ùå Failed</span>';
                    return false;
                }
            }

            // Manual trigger function
            function testManualTrigger() {
                console.log("üîß Manual trigger test started...");
                testEventTrigger();
            }

            // Run all tests
            function runAllTests() {
                console.log("üöÄ Running all JavaScript tests...");
                testJavaScript();
                testFieldDetection();
                testEventTrigger();
                console.log("‚úÖ All tests completed!");
            }

            // Clear console
            function clearConsole() {
                console.clear();
                console.log("üßπ Console cleared");
            }

            // Auto-run basic tests on page load
            window.addEventListener("load", function () {
                console.log("üìÑ Page loaded, running basic tests...");
                testJavaScript();
                testFieldDetection();
            });

            // Add event listener to test field
            document
                .getElementById("test-field")
                .addEventListener("blur", function () {
                    console.log(
                        "üéØ Blur event detected on test field, value:",
                        this.value
                    );
                });

            document
                .getElementById("test-field")
                .addEventListener("input", function () {
                    console.log(
                        "‚å®Ô∏è Input event detected, current value:",
                        this.value
                    );
                });
        </script>
    </body>
</html>
